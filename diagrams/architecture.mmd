graph TB
    %% High-level Architecture Overview
    subgraph "Input Layer"
        User([User])
        TraceFiles[Trace Files]
        LiveAgents[Live Agents]
    end
    
    subgraph "Core System"
        CLI[CLI Interface]
        Ingestion[Ingestion Layer]
        PreAnalysis[Pre-Analysis]
        Analysis[Analysis Engine]
        Output[Output Layer]
    end
    
    subgraph "External Services"
        OpenRouter[OpenRouter API]
    end
    
    subgraph "Output"
        Reports[Reports]
        Artifacts[Code Artifacts]
    end
    
    User --> CLI
    TraceFiles --> CLI
    LiveAgents --> CLI
    
    CLI --> Ingestion
    Ingestion --> PreAnalysis
    PreAnalysis --> Analysis
    Analysis --> Output
    
    Analysis --> OpenRouter
    OpenRouter --> Analysis
    
    Output --> Reports
    Output --> Artifacts
    
    %% Styling
    classDef input fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef core fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef external fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef output fill:#e0f2f1,stroke:#00695c,stroke-width:2px
    
    class User,TraceFiles,LiveAgents input
    class CLI,Ingestion,PreAnalysis,Analysis,Output core
    class OpenRouter external
    class Reports,Artifacts output
